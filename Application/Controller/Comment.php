<?phpclass Controller_Comment extends Core_Controller{	private $error  =array();		public function actionCreate ()	{		$comment = new Core_Comment();		$postModel = new Model_Post();		$this->view = new Core_View();		$this->model = new Model_Comment();				if ($_SERVER['REQUEST_METHOD'] == 'POST') {						$comment->content = trim($_POST['content']);			$comment->createTime=time();			$comment->postId = $_POST['postId'];			$comment->name = (!empty($_POST['name']))? trim($_POST['name']) : Config::getDefaultName();						$this->error = $this->model->validate($comment);			if (empty($this->error)){				$this->model->createComment($comment);				$postModel->bumpThread($comment->postId,$comment->createTime);				header("Location:{$_SERVER['HTTP_REFERER']}");			} else {				$this->view->render('View_CommentCreate.php','View_Template.php', array('error'=>$this->error), array('thread'=>$comment->postId));			}					}		$this->view->render('View_CommentCreate.php','View_Template.php');	}			}
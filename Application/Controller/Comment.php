<?phpclass Controller_Comment extends Core_Controller{			public function actionCreate ()	{		$this->view = new Core_View();		$this->model = new Model_Comment();		$this->isCaptchaRequired();		$comment = new Core_Comment();		$auth = new Core_Auth();		$thread = $_GET['thread'];		$postModel = new Model_Post();		if ($_SERVER['REQUEST_METHOD'] == 'POST') {			$this->getPost($comment);			$comment->createTime=date('Y-m-d H:i:s');			$comment->name = $auth->getName();//get name of user, if he is logged 			$error = $this->model->validate($comment);			if (empty($error)){				$this->model->createComment($comment);				$postModel->bumpThread($comment->postId,$comment->createTime);				header("Location:".Config::getbasePath()."/thread/index?thread=".$comment->postId);			} else {				$this->view->render('View_CommentCreate.php','View_Template.php', array('error'=>$error, 'thread'=>$comment->postId ));			}			}		$this->view->render('View_CommentCreate.php','View_Template.php', array('thread' => $thread));	}		private function isCaptchaRequired()	{		$auth = new Core_Auth();		$capthca = new Core_Captcha();		if(!$auth->isLogged()){			$capthca->requireCaptcha();		} else {			$capthca->disableCaptcha();		}	}		}